(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"4KYa":function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),o=r("L2JU"),s=r("D4Jh"),i=r("mXMD"),c=r("UzJ+"),l=r("txcL"),u=r("f5ZI"),d=r("tax4"),f=r("67TT");function p(e,t,r,n,a,o,s){try{var i=e[o](s),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){p(o,n,a,s,i,"next",e)}function i(e){p(o,n,a,s,i,"throw",e)}s(void 0)}))}}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _,g,w,y={name:"user",components:{TheDataTable:u.a,TheDialogForm:d.a,TheDialogDelete:f.a},data:function(){return{model:"user",params:null,total:0,selected:[],headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Role",value:"role.name"},{text:"Last At",value:"last_at"},{text:"Last Ip",value:"last_ip"}],dialog:!1,dialogDelete:!1,list_roles:[],change_password:!1,show_password:!1,form:{}}},computed:h(h({},Object(o.d)("app",["loading","dense","profile"])),Object(o.d)("model",["users"])),methods:h(h(h({},Object(o.c)("model",[i.b])),Object(o.b)("model",[s.b,s.c,s.a])),{},{create:function(){this.form=h(h({},this.$_.cloneDeep(c.d)),{},{password:null,password_confirmation:null}),this.change_password=!0,this.dialog=!0},edit:function(){this.form=h(h({},this.$_.cloneDeep(this.selected[0])),{},{password:null,password_confirmation:null}),this.change_password=!1,this.dialog=!0},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.$refs.form.reset()}))},fetchRoles:(w=v(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GET_MODELS({model:"role",params:{temporary:!0}}).then((function(e){var r=e.data;t.list_roles=t.$_.map(r,(function(e){return t.$_.pick(e,["id","name"])}))})).catch((function(e){return Object(l.b)(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return w.apply(this,arguments)}),fetchItem:(g=v(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.GET_MODELS({model:"user",params:h(h({},this.options),{},{search:this.search})}).then((function(e){var r=e.meta;t.total=r.total})).catch((function(e){return Object(l.b)(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)}),saveItem:function(){var e=this;this.$refs.form.validate().then((function(t){if(t){var r=e.form;e.change_password||(e.$delete(r,"password"),e.$delete(r,"password_confirmation")),e.SAVE_MODEL({model:"user",payload:r}).then(function(){var t=v(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.id>0)){t.next=4;break}e.UPDATE_MODEL({model:"user",data:n}),t.next=6;break;case 4:return t.next=6,e.fetchItem();case 6:e.selected=[],e.close();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){var r=Object(l.b)(t);e.$refs.form.setErrors(r)}))}}))},deleteItem:(_=v(a.a.mark((function e(){var t=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.DELETE_MODELS({model:"user",ids:this.$_.map(this.selected,"id")}).then(v(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchItem();case 2:t.selected=[],t.dialogDelete=!1;case 4:case"end":return e.stop()}}),e)})))).catch((function(e){return Object(l.b)(e)}));case 2:case"end":return e.stop()}}),e,this)}))),function(){return _.apply(this,arguments)})}),watch:{dialog:function(e){e&&0==this.list_roles.length&&this.fetchRoles()}}},O=r("KHd+"),x=Object(O.a)(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-col",{attrs:{cols:"12"}},[r("the-data-table",{attrs:{headers:e.headers,model:e.model,items:e.users,total:e.total},on:{unselect:function(t){e.selected=[]},fetch:e.fetchItem,create:e.create,edit:e.edit,delete:function(t){e.dialogDelete=!0}},scopedSlots:e._u([{key:"item.name",fn:function(t){var n=t.item;return[e.profile.id==n.id?r("v-chip",{attrs:{to:{name:"profile"},color:"primary",small:e.dense}},[e._v(e._s(n.name))]):[e._v("\n                "+e._s(n.name)+"\n            ")]]}},{key:"item.last_at",fn:function(t){var r=t.item;return[r.last_at?[e._v("\n                "+e._s(e._f("moment")(r.last_at,"from"))+"\n            ")]:[e._v("\n                Never\n            ")]]}},{key:"item.last_ip",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(r.last_ip||"None")+"\n        ")]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),e._v(" "),r("the-dialog-form",{attrs:{form:e.form},on:{close:e.close,submit:e.saveItem},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("validation-observer",{ref:"form"},[r("validation-provider",{attrs:{name:"name"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,a=t.valid;return[r("v-text-field",{attrs:{label:"Name",type:"text","error-messages":n,success:a,counter:"",hint:"This is to identify the user","persistent-hint":""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}])}),e._v(" "),r("validation-provider",{attrs:{name:"email"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,a=t.valid;return[r("v-text-field",{attrs:{label:"E-mail",type:"email","error-messages":n,success:a,counter:"",hint:"This email is for recovery","persistent-hint":""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})]}}])}),e._v(" "),r("validation-provider",{attrs:{name:"role.id"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,a=t.valid;return[r("v-select",{attrs:{items:e.list_roles,"error-messages":n,success:a,loading:!!e.loading,chips:"","item-text":"name","item-value":"id",label:"Role",hint:"Role for this user","persistent-hint":"","return-object":""},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}})]}}])}),e._v(" "),e.form.id>0?r("v-btn",{attrs:{color:"red",dark:"",small:""},on:{click:function(t){e.change_password=!e.change_password}}},[e._v(e._s(e.change_password?"Keep":"Change")+" Password")]):e._e(),e._v(" "),e.change_password?[r("validation-provider",{attrs:{name:"password"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,a=t.valid;return[r("v-text-field",{attrs:{label:"Password",type:e.show_password?"text":"password","append-icon":e.show_password?"mdi-eye":"mdi-eye-off","error-messages":n,success:a,hint:"Password for this user","persistent-hint":"",counter:"",autocomplete:"off"},on:{"click:append":function(t){e.show_password=!e.show_password}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})]}}],null,!1,2233226270)}),e._v(" "),r("validation-provider",{attrs:{name:"password_confirmation"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors,a=t.valid;return[r("v-text-field",{attrs:{label:"Password Confirmation",type:e.show_password?"text":"password","append-icon":e.show_password?"mdi-eye":"mdi-eye-off","error-messages":n,success:a,hint:"Fill again the password","persistent-hint":"",counter:"",autocomplete:"off"},on:{"click:append":function(t){e.show_password=!e.show_password}},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})]}}],null,!1,3248270939)})]:e._e()],2)],1),e._v(" "),r("the-dialog-delete",{attrs:{selected:e.selected,model:e.model},on:{delete:e.deleteItem,close:function(t){e.dialogDelete=!1}},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item;return[e._v("\n            "+e._s(r.name)+"\n        ")]}}]),model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}})],1)}),[],!1,null,null,null);t.default=x.exports},"67TT":function(e,t,r){"use strict";var n=r("L2JU"),a=r("dhqo"),o=r.n(a);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"the-dialog-delete",props:{value:{type:Boolean,default:!1},selected:{type:Array,default:function(){return[]}},model:{type:String,default:""}},computed:i(i({},Object(n.d)("app",["loading"])),{},{question:function(){var e=this.selected.length;return 1===e?"this ".concat(this.model," ?"):"these ".concat(e," ").concat(o()(this.model)," ?")}})},u=r("KHd+"),d=Object(u.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:e.value,"max-width":"290",persistent:"",scrollable:""},on:{input:function(t){return e.$emit("input",t)}}},[r("v-card",{attrs:{loading:!!e.loading}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v("Confirmation")]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-text",{staticClass:"pt-2",staticStyle:{"max-height":"300px"}},[e._v("\n            Are you sure to delete "+e._s(e.question)+"\n            "),r("v-chip-group",{attrs:{column:"",small:"","active-class":"primary--text"}},e._l(e.selected,(function(t){return r("v-chip",{key:t.id},[e._t("default",null,{item:t})],2)})),1)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"darken-1",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!!e.loading,color:"red",dark:"",large:""},on:{click:function(t){return e.$emit("delete")}}},[e._v("Yes, sure")])],1)],1)],1)}),[],!1,null,null,null);t.a=d.exports},"UzJ+":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return s}));var n={id:-1,name:"",email:"",role:{id:-1,name:""}},a={id:-1,name:"",description:"",user:n},o={id:-1,product_id:-1,price:0,changed_at:null,product:a,user:n},s={id:-1,name:"",description:"",user:n,percents:[]}},f5ZI:function(e,t,r){"use strict";var n=r("dhqo"),a=r.n(n),o=r("LvDl"),s=r("L2JU"),i=r("bHnR");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d={name:"the-data-table",props:{value:{type:Array,default:function(){return[]}},headers:{type:Array,default:function(){return[]}},model:{type:String,default:""},items:{type:Array,default:function(){return[]}},total:{type:Number,default:0}},data:function(){return{search:"",searchBox:!1,options:null}},computed:l(l({},Object(s.d)("app",["loading","dense"])),{},{tableTitle:function(){var e=this.value.length;return e>0?"".concat(e," selected"):"".concat(a()(this.$_.startCase(this.model)))}}),methods:l(l({},Object(s.c)("app",[i.l])),{},{toggleSearch:function(){this.searchBox=!this.searchBox,this.searchBox||(this.search="")},fetch:function(){this.$emit("fetch",l(l({},this.options),{},{search:this.search}))}}),watch:{options:{handler:function(){this.fetch()},deep:!0},search:Object(o.debounce)((function(){this.fetch()}),500)}},f=r("KHd+"),p=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-data-table",{staticClass:"elevation-1",attrs:{value:e.value,headers:e.headers,items:e.items,search:e.search,options:e.options,"server-items-length":e.total,loading:!!e.loading,dense:e.dense,page:1,"items-per-page":10,"selectable-key":"selectable","sort-by":"updated_at","sort-desc":"","show-select":"","must-sort":""},on:{input:function(t){return e.$emit("input",t)},"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{dark:!!e.value.length,flat:""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{icon:""},on:{click:function(t){return e.$emit("unselect")}}},n),[r("v-icon",[e._v("mdi-close")])],1)]}}])},[e._v(" "),r("span",[e._v("Cancel")])]),e._v(" "),r("v-toolbar-title",[e._v(e._s(e.tableTitle))]),e._v(" "),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e._v(" "),r("v-spacer"),e._v(" "),r("v-slide-x-reverse-transition",[r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:!e.value.length&&e.searchBox,expression:"!value.length && searchBox"}],attrs:{label:"Search",autofocus:"","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:!e.value.length,expression:"!value.length"}],attrs:{icon:""},on:{click:e.toggleSearch}},n),[r("v-icon",[e._v("\n                            "+e._s(e.searchBox?"mdi-close-circle":"mdi-magnify")+"\n                        ")])],1)]}}])},[e._v(" "),r("span",[e._v("Search")])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:!e.value.length,expression:"!value.length"}],attrs:{icon:""},on:{click:function(t){return e.$emit("create")}}},n),[r("v-icon",[e._v("mdi-plus")])],1)]}}])},[e._v(" "),r("span",[e._v("Create")])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:!e.value.length,expression:"!value.length"}],attrs:{icon:""},on:{click:e.TOGGLE_DENSE}},n),[r("v-icon",[e._v(e._s(e.dense?"mdi-table":"mdi-table-large"))])],1)]}}])},[e._v(" "),r("span",[e._v(e._s(e.dense?"Larger":"Smaller"))])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:e.value.length,expression:"value.length"}],attrs:{icon:""},on:{click:function(t){return e.$emit("delete")}}},n),[r("v-icon",[e._v("mdi-delete")])],1)]}}])},[e._v(" "),r("span",[e._v("Delete")])]),e._v(" "),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({directives:[{name:"show",rawName:"v-show",value:1==e.value.length,expression:"value.length == 1"}],attrs:{icon:""},on:{click:function(t){return e.$emit("edit")}}},n),[r("v-icon",[e._v("mdi-pencil")])],1)]}}])},[e._v(" "),r("span",[e._v("Edit")])])],1)]},proxy:!0},e._l(e.headers,(function(t,r){return{key:"item."+t.value,fn:function(r){var n=r.item;return[e._t("item."+t.value,[e._v("\n            "+e._s(e.$_.get(n,t.value))+"\n        ")],{item:n})]}}}))],null,!0)})}),[],!1,null,null,null);t.a=p.exports},tax4:function(e,t,r){"use strict";var n=r("L2JU");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={name:"the-dialog-form",props:{value:{type:Boolean,default:!1},form:{type:Object,default:function(){}},title:{type:String,default:""},width:{type:String,default:"500px"}},computed:o(o({},Object(n.d)("app",["loading"])),{},{formTitle:function(){return this.title?this.title:-1===this.form.id?"New Item":"Edit Item"}})},c=r("KHd+"),l=Object(c.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{value:e.value,"max-width":e.width,persistent:"",scrollable:""},on:{input:function(t){return e.$emit("input",t)}}},[r("v-card",{attrs:{loading:!!e.loading}},[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),r("v-divider"),e._v(" "),r("v-card-text",{staticStyle:{"max-height":"500px"}},[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.$emit("submit")}}},[e._t("default"),e._v(" "),r("v-btn",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"submit"}})],2)],1),e._v(" "),r("v-divider"),e._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("close")}}},[e._v("Cancel")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-btn",{attrs:{disabled:!!e.loading,color:"primary",large:""},on:{click:function(t){return e.$emit("submit")}}},[e._v("Save")])],1)],1)],1)}),[],!1,null,null,null);t.a=l.exports}}]);
//# sourceMappingURL=4.js.map